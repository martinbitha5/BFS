# üîÑ Commandes pour red√©marrer l'API sur Hostinger

# √âtape 1: V√©rifier que vous √™tes dans le bon r√©pertoire
cd ~/domains/api.brsats.com/public_html/api

# √âtape 2: V√©rifier que le code est √† jour
git pull origin main

# √âtape 3: V√©rifier que le build existe
ls -la dist/server.js

# Si dist/server.js n'existe pas, rebuild:
npm run build

# √âtape 4: V√©rifier que ecosystem.config.js existe
ls -la ecosystem.config.js

# √âtape 5: V√©rifier les variables d'environnement
cat .env | grep -E "JWT_SECRET|SUPABASE_URL|PORT"

# √âtape 6: D√©marrer l'API avec PM2
pm2 start ecosystem.config.js --env production

# √âtape 7: Sauvegarder la configuration PM2 pour qu'elle persiste apr√®s red√©marrage
pm2 save

# √âtape 8: V√©rifier le statut
pm2 status

# √âtape 9: Voir les logs pour v√©rifier que tout fonctionne
pm2 logs bfs-api --lines 30

# √âtape 10: Tester l'API localement
curl http://localhost:3000/health

# √âtape 11: Tester l'API depuis l'ext√©rieur
curl https://api.brsats.com/health

